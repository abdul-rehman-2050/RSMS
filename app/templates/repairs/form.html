{% extends "base.html" %}

{% block content %}
<div class="max-w-3xl mx-auto space-y-6">

    <nav class="flex text-sm text-slate-500">
        <a href="{{ url_for('repair.list_repairs') }}" class="hover:text-blue-500">Repairs</a>
        <span class="mx-2">/</span>
        <span class="text-slate-900 dark:text-white font-medium">{{ action }} Order</span>
    </nav>

    <div class="bg-white dark:bg-slate-900 p-8 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800">
        <h2 class="text-xl font-bold mb-6 text-slate-800 dark:text-white">{{ action }} Repair Details</h2>

        <form method="post" class="space-y-6">
            
            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Select Customer</label>
                <select name="customer_id" required class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white">
                    <option value="" disabled {% if not repair %}selected{% endif %}>-- Choose Customer --</option>
                    {% for c in customers %}
                    <option value="{{ c.id }}" {% if repair and repair.customer_id == c.id %}selected{% endif %}>
                        {{ c.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Device Name/Model</label>
                <input name="device" type="text" required value="{{ repair.device if repair else '' }}" 
                       placeholder="e.g. iPhone 13 Pro Max"
                       class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white">
            </div>

            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Issue Description</label>
                <textarea name="issue_description" rows="4" required placeholder="Describe the problem..."
                          class="w-full px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white">{{ repair.issue_description if repair else '' }}</textarea>
            </div>

            <div>
                <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Status</label>
                <select name="status" class="w-full md:w-1/2 px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white">
                    <option {% if repair and repair.status == 'Pending' %}selected{% endif %}>Pending</option>
                    <option {% if repair and repair.status == 'In Progress' %}selected{% endif %}>In Progress</option>
                    <option {% if repair and repair.status == 'Completed' %}selected{% endif %}>Completed</option>
                </select>
            </div>

            <div class="pt-4 flex gap-4">
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition shadow-md">
                    Save Order
                </button>
                <a href="{{ url_for('repair.list_repairs') }}" class="px-6 py-2 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}